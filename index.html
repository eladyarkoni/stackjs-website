<!DOCTYPE html>
<html lang="en">
<head>
	<title>StackJS Framework</title>
	<meta charset="utf-8">
	<meta name="description" content="StackJS - Javascript Object Oriented Programming Framework">
	<meta name="robots" content="INDEX/FOLLOW">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="js/codemirror/codemirror.css">
	<link rel="stylesheet" type="text/css" href="js/codemirror/theme/lesser-dark.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link href='http://fonts.googleapis.com/css?family=Black+Ops+One' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="lib/stackjs.js"></script>
	<script type="text/javascript" src="js/website.js"></script>
	<script type="text/javascript" src="js/codemirror/codemirror.js"></script>
	<script type="text/javascript" src="js/codemirror/mode/javascript.js"></script>
	<script type="text/javascript" src="js/codemirror/util/javascript-hint.js"></script>
</head>
<body>
	<a href="https://github.com/eladyarkoni/stackjs-website/tree/master/lib"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
	</a>
	<div class="container">
		<div class="row">
			<div class="span12"><p class="st-title" align="center">{StackJS: Framework}</p></div>
		</div>
		<div class="row">
			<div class="span12">
				<p align="center" class="st-subtitle">
					Javascript Object Oriented Programming Framework By <a href="http://eladyarkoni.tumblr.com">Elad Yarkoni</a>
				</p>
			</div>
		</div>
		<div class="row">
			<div class="span12">
				<p align="center">
					<a class="btn" onmousedown="website.switchContentPage($('#home'))">Home</a>
					<a class="btn" onmousedown="website.switchContentPage($('#features'))">StackJS Features</a>
					<a class="btn" onmousedown="website.switchContentPage($('#design-patterns'))">Design Patterns</a>
					<a class="btn btn-danger" onmousedown="website.switchContentPage($('#web-application'))">Web Application MVC</a>
					<a class="btn" onmousedown="website.switchContentPage($('#boilerplate'))">Boilerplate Download</a>
					<a class="btn" onmousedown="website.switchContentPage($('#editor'))">Try it</a>
				</p>
			</div>
		</div>
		<div class="row">
			<div class="span12">
<!-- *******************************************************************************************************--> 
<!-- 											Home Content 												-->
<!-- *******************************************************************************************************--> 
				<div class="container content" id="home">
						<pre>
							<code>
Class("Human", {
	
	firstname: null,
	lastname: null,

	toString: function() {
		return "Hi, my name is " + this.firstname + " " + this.lastname;
	}
});

Class("Doctor::Human", {
	
	// C'tor
	Doctor: function(fname, lname) {
		this.firstname = fname;
		this.lastname = lname;
	},

	checkPatient: function(human) {
		return human.getFirstname() + ", you're ok!";
	},

	toString: function() {
		return "Hi, my name is Dr " + this.firstname + " " + this.lastname;
	}

});

// Create new objects
var newDoctor = new Doctor("Gregory", "House");
var newPatient = new Human();

// automatic setters and getters generator
newPatient.setFirstname("John");
newPatient.setLastname("Smith");

newDoctor.checkPatient(newPatient);
							</code>
						</pre>
						<h2>Features</h2>
						<ul>
							<li>Object Oriented Programming</li>
							<li>Automatic setter and getter generator</li>
							<li>Inheritance</li>
							<li>Exception Event Handling And Full Stack Trace</li>
							<li>Object Delegations From ObjectiveC</li>
							<li class="marked">Web Application MVC integrated framework</li>
						</ul>
						<br>
						<h2>More Information</h2>
						<ul>
							<li>This Website based on <a href="http://twitter.github.com/bootstrap/">Twitter bootstrap framework</a></li>
							<li>StackJS is Created in <a href="http://www.sublimetext.com/">Sublime Text Editor</a></li>
							<li>Follow <a href="https://twitter.com/#!/EladYarkoni">@EladYarkoni</a> on twitter for updates</li>
							<li>View my <a href="http://eladyarkoni.tumblr.com">Blog</a></li>
						</ul>
						<br>
						<h2>StackJS Versions</h2>
						<ul>
							<li>StackJS <a href="https://github.com/eladyarkoni/stackjs-website/tree/stackjs-framework-v0.1.0/lib">Version 0.1.0</a> is available
							</li>
						</ul>
				</div>
<!-- *******************************************************************************************************--> 
<!-- 											Features Content 											-->
<!-- *******************************************************************************************************--> 
				<div class="container content" id="features">
					<h2>Exception Handling</h2>
					<div class="explenation">
						StackJS supports exceptions and manage your application call stack.
						<br>
						In case of an exception, a full stack trace will be printed to the browser console.
					</div>
					<pre>
						<code>
// Define new exception
Class("StillAliveException::Exception", {
	human: null,
	StillAliveException: function(human) {
		this.human = human;
		this.message = "Human is still alive";
	}
});

Class("Human", {
	firstname: null,
	lastname: null,
	godmode: false,
	Human: function(fname,lname) {
		this.firstname = fname;
		this.lastname = lname;
	},
	kill: function(human) {
		if (human.getGodmode()) {
			Throw(new StillAliveException(human));
		}
	}
});

// Main
var killer = new Human("Tony", "Soprano");
var victim = new Human("John", "Smith");
victim.setGodmode(true);

// register exception events by exception type
Catch('StillAliveException', function(ex) {
	/* Handle still alive exception */
});

killer.kill(victim);
						</code>
					</pre>
					<h2>Automatic setter and getter generator</h2>
					<div class="explenation">
						StackJS creates setters and getters for each class data member.
					</div>
					<pre>
						<code>
Class('Car', {
	engineSize: null,
	model: null,
	manufacturer: null,
	maxSpeed: null,
	Car: function(manufacturer) {
		this.manufacturer = manufacturer;
	}
});

var car = new Car('Toyota');
car.setModel(2007);
console.log(car.getManufacturer());
						</code>
					</pre>
					<h2>Object Delegation</h2>
					<div class="explenation">
						StackJS adopt the object delegation mechanizm from objectiveC.
						<br>
						Object could be a delegate of another object and handle its events.
					</div>
					<pre>
						<code>
Class("Engine",{
	
	size: null,
	
	Engine: function(size) {
		this.size = size;
	},
	
	start: function() {
		// engine did broken after start
		this.callDelegate("didBrokenPart",[this]);	
	}
});

Class("Car",{

	engine: null,

	Car: function() {
		this.engine = new Engine(1600);
		// make this car the engine delegate
		this.engine.setDelegate(this);
	},

	drive: function() {
		console.log("start drive");
		this.engine.start();
	},

	stop: function() {
		console.log("car is stopped");
	},

	// broken engine stops the car
	didBrokenPart: function(object) {
		this.stop();
	}
});
						</code>
					</pre>
				</div>
<!-- *******************************************************************************************************--> 
<!-- 											Design Patterns Content 									-->
<!-- *******************************************************************************************************-->
				<div class="container content" id="design-patterns">
					<h2>The Visitor Design Pattern</h2>
					<pre>
						<code>
Class("Shape",{
	x: null,
	y: null,
	Shape: function(x,y) {
		this.x = x;
		this.y = y;
	}
});

Class("Rectangle::Shape",{
	edgeSize: null,
	Rectangle: function(x,y,edgeSize){
		this.x = x;
		this.y = y;
		this.edgeSize = edgeSize;
	},
	accept: function(visitor) {
		visitor.visitRectange(this);
	}
});

Class("Circle::Shape",{
	radius: null,
	Circle: function(x,y,radius) {
		this.x = x;
		this.y = y;
		this.radius = radius;
	},
	accept: function(visitor) {
		visitor.visitCircle(this);
	}
});


Class("CanvasVisitor",{
	visitCircle: function(circle) {
		var mycanvas = document.createElement('canvas');
		mycanvas.style.position = 'absolute';
		mycanvas.style.left = circle.getX() - circle.getRadius() + 'px';
		mycanvas.style.top = circle.getY() - circle.getRadius() + 'px';
		mycanvas.style.width = (circle.getRadius() * 2) + 'px';
		mycanvas.style.height = (circle.getRadius() * 2) + 'px';
		var ctx = mycanvas.getContext('2d');
		ctx.beginPath();
		ctx.arc(circle.getRadius(), circle.getRadius(), circle.getRadius(), 0, 2 * Math.PI, false);
		ctx.fillStyle = "#8ED6FF";
		ctx.fill();
		document.body.appendChild(mycanvas);
	},
	visitRectange: function(rectange) {
		var mycanvas = document.createElement('canvas');
		mycanvas.style.position = 'absolute';
		mycanvas.style.left = rectange.getX() + 'px';
		mycanvas.style.top = rectange.getY() + 'px';
		mycanvas.style.width = rectange.getEdgeSize() + 'px';
		mycanvas.style.height = rectange.getEdgeSize() + 'px';
		var ctx = mycanvas.getContext('2d');
		ctx.beginPath();
		ctx.rect(0, 0, rectange.getX() + rectange.getEdgeSize(), rectange.getY() + rectange.getEdgeSize());
		ctx.fillStyle = '#8ED6FF';
		ctx.fill();
		ctx.strokeStyle = 'black';
		document.body.appendChild(mycanvas);
	}
});

/*
*
*	Main
*/

var shapes = [
	new Circle(100,50,50),
	new Rectangle(300,50,100)
];

for (var i = 0; i < shapes.length; i++) {
	shapes[i].accept(new CanvasVisitor());
}
						</code>
					</pre>
					<h2>The Prototype Design Pattern</h2>
					<div class="explenation">
						StackJS base object has the clone method.
					</div>
					<pre>
						<code>
Class('Car', {
	
	type: null,

	Car: function(type) {
		this.type = type;
	}
});

Class('ToyotaFactory', {

	prototypeObject: null,

	ToyotaFactory: function() {
		this.prototypeObject = new Car('Toyota');
	},

	createCars: function(size) {
		var carsArray = [];
		for (var i = 0; i < size; i++) {
			carsArray.push(this.prototypeObject.clone());
		}
		return carsArray;
	}

});

var toyotaFactory = new ToyotaFactory();
var toyotaCars = toyotaFactory.createCars(50);

						</code>
					</pre>
					<h2>The Singleton Design Pattern</h2>
					<div class="explenation">
						StackJS has its own implementation of singleton classes, just omit the 'new' declaration and your OK.
					</div>
					<pre>
						<code>
Class('Application', {
			
	applicationName: null,

	start: function() {
		console.log('application has started');
	}
});

//
// Main Program
//

var myApplication = Application();
var anotherMyApplication = Application();
myApplication.setApplicationName('StackJS Application');
console.log(anotherMyApplication.getApplicationName()); // prints 'StackJS Application'
						</code>
					</pre>
					<h2>The Factory Design Pattern</h2>
					<pre>
						<code>
Class('PrivateCar', {
	manufacturer: null,
	PrivateCar: function(manufacturer) {
		this.manufacturer = manufacturer;
	}
});

Class('Truck', {
	manufacturer: null,
	Truck: function(manufacturer) {
		this.manufacturer = manufacturer;
	}
});

Class('Bus', {
	manufacturer: null,
	Bus: function(manufacturer) {
		this.manufacturer = manufacturer;
	}
});

Class('VehicleFactory', {
	createPrivateCar: function(manufacturer) {
		return new PrivateCar(manufacturer); 
	},
	createTruck: function(manufacturer) {
		return new Truck(manufacturer); 
	},
	createBus: function(manufacturer) {
		return new Bus(manufacturer); 
	}
});
						</code>
					</pre>
					<h2>The Observer Design Pattern</h2>
					<div class="explenation">
						This example implements the NSNotificationCenter mechanizm from the <a href="http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html">iOS SDK</a>
					</div>
					<pre>
						<code>
// Notification Object
Class('NSNotification', {
	
	object: null,
	name: null,
	NSNotification: function(name, object) {
		this.name = name;
		this.object = object;
	}

});

// Notification Center
Class('NSNotificationCenter', {
	
	_observers: [],
	
	addObserver: function(observer, method, notificationName) {
		this._observers.push({
			name: notificationName,
			observer: observer,
			method: method
		});
	},

	postNotificationName: function(name, object) {
		for (var i = 0; i < this._observers.length; i++) {
			if (this._observers[i].name === name) {
				this._observers[i].observer[this._observers[i].method](new NSNotification(name, object));
			}
		}
	}

});

Class('Human', {
	name: null,
	sick: function() {
		NSNotificationCenter().postNotificationName('humanSick', this);
	}
});

Class('Doctor', {
	Doctor: function() {
		NSNotificationCenter().addObserver(this, 'humanIsSick', 'humanSick');
	},
	humanIsSick: function(nsnotification) {
		console.log("Hi " + nsnotification.getObject().getName() + ", I will take care of you");
	}
});
						</code>
					</pre>
					<div class="explenation">
						More Design Patterns will be available soon.
					</div>
				</div>

<!-- *******************************************************************************************************--> 
<!-- 											Web Application MVC Content 										-->
<!-- *******************************************************************************************************-->
				<div class="container content" id="web-application">
					<h2>StackJS Application Framework</h2>
					<div class="explenation">
						StackJS framework helps you to build web and mobile applications easily, based on model-view-controller design pattern.
						StackJS keeps your application code readable and makes your developement process swift and simple.
					</div>
					<h3><a onmousedown="website.switchContentPage($('#api'))">API Documentation</a></h3>
					<h2>StackJS Application Architecture</h2>
					<div class="explenation application-architecture-image"></div>
					<h2>The Model</h2>
					<div class="explenation">
						The model represents the data structure.
					</div>
					<h3>Example</h3>
					<div class="explenation">
						Shopping list model with items and quantity for each item. 
					</div>
					<pre>
						<code>
Class('ShoppingList', {
	
	shoppingList: [],

	addItem: function(name, quantity) {
		this.shoppingList.push({
			name: name,
			quantity: quantity
		});	
	},

	removeItemByName: function(name) {
		for (var i = 0; i < this.shoppingList.length; i++) {
			if (this.shoppingList[i].name === name) {
				this.shoppingList.splice(i, 1);
			}
		}
	},

	getItem: function(index) {
		return this.shoppingList[i];
	},

	size: function() {
		return this.shoppingList.length;
	}
});
						</code>
					</pre>
					<h2>The View</h2>
					<div class="explenation">
						The view object manages the DOM element.
						<br>
						View objects should inherit from StackJS View class.
					</div>
					<h3>Example</h3>
					<div class="explenation">
						The shopping list will be rendered inside a table view.
						<br>
						This example defines two views, one represents the cell view and the second is for the table view. 
					</div>
					<pre>
						<code>
Class('TableView::View', {
	
	// View class rendering method
	render: function() {
		this.clearViews();
		this.addClasses("table-view");
		for (var i = 0; i < this.getModel().size(); i++) {
			this.addViews('$$', new TableCellView(i));
		}
	}

});
						</code>
					</pre>
					<pre>
						<code>
Class('TableCellView::View', {
	
	index: null,

	TableCellView: function(index) {
		this.index = index;
	},
	
	render: function: function() {
		this.addClasses("table-cell", "no-border");
		this.addViews('&lt;span&gt;$$&lt;/span&gt;&lt;span&gt;$$&lt;/span&gt;', 
			this.getModel().getItem(this.index).name,
			this.getModel().getItem(this.index).quantity
		);
		this.addEvent("span", "onclick", "tableCellClicked");
	},

	handleEvents: function(evt, eventName) {
		if (eventName === "tableCellClicked") {
			this.callDelegate("shoppingCartItemClicked", [this.index]);
		}
	}
});							
						</code>
					</pre>
					<h2>The Controller</h2>
					<div class="explenation">
						The controller manages the model and the view objects.
						<br>
						The controller act as a delegate of its views and handle both the view and the application events.
					</div>
					<h3>Example</h3>
					<div class="explenation">
						The TableViewController class represents the table controller.
						<br>
						This table controller owns the view and the model, define itself as the view delegate and implements the view delegate method - shoppingCartItemClicked.
					</div>
					<pre>
						<code>
Class('TableViewController', {
	model: null,
	view: null,
	// C'tor
	TableViewController: function() {
		this.view = new TableView();
		this.model = new ShoppingList();
		this.view.setDelegate(this);
		this.view.setModel(this.model);
		Viewport().addViews('$$',this.view);
	},

	// delegation method
	shoppingCartItemClicked: function(index) {
		// do something...
	}
});
						</code>
					</pre>
					<h2>Demos</h2>
					<h3><a href="examples/task-manager" target="_new">TODO's Application</a></h3>
					<h3><a href="examples/movie-db" target="_new">Movie DB Application</a></h3>
				</div>
<!-- *******************************************************************************************************--> 
<!-- 											Boilerplate Content 										-->
<!-- *******************************************************************************************************-->
				<div class="container content" id="boilerplate">
					<h2><p align="center">StackJS Boilerplate Generator</p></h2>
					<p align="center">
						<input id="appNameInput" class="input-xlarge focused" style="width: 400px;" type="text" placeholder="Enter your project name">
					</p>
					<p align="center">
						<button class="btn btn-primary" type="submit" onclick="website.createBoilerplate()">
						  Create Boilerplate
						</button>
					</p>
					<br>
					<div class="progress progress-striped active hidden">
					  <div class="bar width-transition" style="width: 0;"></div>
					</div>
					<div class="boilerplate-container">
						
					</div>
				</div>
<!-- *******************************************************************************************************--> 
<!-- 											editor		 												-->
<!-- *******************************************************************************************************-->
				<div class="container content" id="editor">
					<span class="h2">StackJS Playground</span>
					<div  id="editor-placeholder">
						<textarea id="code" name="code" style="display: none; ">
// Use out(str) method to print the results

Class('Human', {
	firstName: null,
	lastName: null,
	Human: function(fname, lname) {
		this.firstName = fname;
		this.lastName = lname;
	},
	talk: function() {
		out("Hi, My name is " + this.firstName + ". Nice to meet you.");
	}
});

var human = new Human('john','smith');
human.talk();

						</textarea>
					</div>
					<span class="btn btn-primary" style="display: block; width: 70px;" onclick="website.playCode()">Play</span>
					<div class="modal hide" id="code-run-modal">
					  <div class="modal-header">
					    <button type="button" class="close" data-dismiss="modal">Ã—</button>
					    <div>StackJS playground result</div>
					  </div>
					  <div class="modal-body">
					    
					  </div>
					  <div class="modal-footer">
					    <a href="#" class="btn" data-dismiss="modal">Close</a>
					  </div>
					</div>
				</div>  
			</div>
		</div>
	</div>

<!-- *******************************************************************************************************--> 
<!-- 											API		 												-->
<!-- *******************************************************************************************************-->
	<div class="container content" id="api">
		<span class="h2">API Documentation</span>
		<hr>
		<div class="row-fluid">
			<div class="span3">
				<div class="well sidebar-nav">
		            <ul class="nav nav-list">
		              <li class="nav-header">Web Application API</li>
		              <li><a href="#api/view">View</a></li>
		              <li><a href="#api/viewport">Viewport</a></li>
		            </ul>
		        </div>
			</div>
			<div class="span9">
				<div class="well api">
					<div class="class">
						<a name="api/view" class="title">The View Class</a>
						<div class="description">
							The View class handle the dom element and has a set of methods to customize the view.
						</div>
						<div class="method">
							<div class="title">this.element</div>
							<div class="description">
								The element property holds the dom object.
							</div>
						</div>
						<div class="method">
							<div class="title">function addClasses(class1, class2...)</div>
							<div class="description">
								The addClasses method set css classes to the view element.
							</div>
						</div>
						<div class="method">
							<div class="title">function getViews(selector)</div>
							<div class="description">
								The getViews method returns element from the view root element by giving a query selector string.
							</div>
						</div>
						<div class="method">
							<div class="title">function addViews(templateString, view1, view2...)</div>
							<div class="description">
								The addViews method add subviews to the view object.
								<br>
								The first parameter will be html string and the next parameters will be views to add in four different types: 1-string 2-boolean 3-number 4-View object.
								<br>
								The html string will contain the '$$' signs when each '$$' sign will be replaced with view parameter in the same order.
								<br>
								For example: 
								<br>
								this.addViews('&lt;div&gt;&lt;span&gt;$$&lt;/span&gt;&lt;span&gt;$$&lt;/span&gt;&lt;/div&gt;', "first view", new View());
								<br>
								add the dom element: &lt;div&gt;&lt;span&gt;first view&lt;/span&gt;&lt;span&gt;&lt;div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; to the view element.
								<br>
								The addViews method passes the delegate and the model of the view to the added subviews. 
							</div>
						</div>
						<div class="method">
							<div class="title">function clearViews()</div>
							<div class="description">
								The clearViews method make the view root element empty.
							</div>
						</div>
						<div class="method">
							<div class="title">function removeView()</div>
							<div class="description">
								The removeView method remove the root element from its parent view.
							</div>
						</div>
						<div class="method">
							<div class="title">function addEvent(selector, eventType, eventName)</div>
							<div class="description">
								The addEvent method will add a new dom event.
								<br>
								The selector parameter selects the element which gets the event, the eventType parameter represents the dom event name like: onclick, onmousedown, etc...
								and the eventName parameter represents a unique name which will be sent to the view event handler. 
							</div>
						</div>
						<div class="method">
							<div class="title">function handleEvents(eventObject, eventName)</div>
							<div class="description">
								The handleEvents method is handle the dom events that we added earlier with the addEvent method.
								<br>
								When event occurs, the handleEvents method is called. the eventObject parameter gets the dom event object and the eventName gets the eventName unique string.
								<br>
								Each view class should override this method to handle the dom events. 
							</div>
						</div>
						<div class="method">
							<div class="title">function render()</div>
							<div class="description">
 								The render method is called when the view is added as a subview to another view object or to the viewport.
 								<br>
 								Each view class should override this method to customize the view.
							</div>
						</div>
					</div>
					<div class="class">
						<a name="api/viewport" class="title">The Viewport Class</a>
						<div class="description">
							The Viewport is a singleton class represents the viewport of the document.
							<br>
							The Viewport inherit from the View class and has the same functionality as a single view.
							<br>
							The main application controller should be the viewport delegate when application is initialized.
						</div>
						<div class="method">
							<div class="title">function didBecomeActive() [Delegate method]</div>
							<div class="description">
								The didBecomeActive delegate method is called when the dom is ready. 
							</div>
						</div>
						<div class="method">
							<div class="title">function willResignActive() [Delegate method]</div>
							<div class="description">
								The willResignActive delegate method is called when dom event onbeforeunload is raised. 
							</div>
						</div>
						<div class="method">
							<div class="title">function willTerminate() [Delegate method]</div>
							<div class="description">
								The willTerminate delegate method is called when dom event onunload is raised. 
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Google Analytics Code-->
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-32750506-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
</body>
</html>